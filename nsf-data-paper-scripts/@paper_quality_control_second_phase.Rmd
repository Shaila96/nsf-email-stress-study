---
title: "Quality Control - Second Phase"
header-includes:
- \usepackage{booktabs}
- \usepackage{sectsty} \sectionfont{\centering}
output:
  pdf_document: default
  html_document: default
geometry: top=3.5cm, bottom=3cm
---



```{r echo = FALSE, warning = FALSE, message = FALSE} 
#-------------------------#
#--------LIBRARIES--------#
#-------------------------#
library(readr)
library(dplyr)
library(tidyverse)
library(ggplot2)
library(grid)
library(gridExtra)
library(ggpubr) 
library(gsubfn)
library(knitr)
library(cowplot)


#-------------------------#
#-----GLOBAL VARIABLES----#
#-------------------------#
root_dir <- 'T:/Google Drive/University of Houston/CS - UH/@Research - CPL/@Projects/NsfStressDataCuration'
setwd(root_dir)

data_paper_dir <- file.path(root_dir, 'nsf-data-paper-scripts')
data_dir <- file.path(data_paper_dir, 'data')
plots_dir <- file.path(data_paper_dir, 'plots')
survey_data_dir <- file.path(data_dir, 'survey-data')

session_list <- c('RestingBaseline', 'StressCondition', 'BaselineWriting', 'DualTask', 'Presentation')

non_filtered_data_file_name <- 'full_df_non_filtered.csv'
first_phase_filtered_data_file_name <- 'full_df_first_phase_filtered.csv'
mean_data_file_name <- 'result_df_first_phase.csv'
bad_moderate_signal_file_name <- 'bad_moderate_signal.csv'
pre_survey_file_name <- 'pre-survey.csv'

non_filtered_df <- tibble()
first_phase_filtered_df <- tibble()
second_phase_filtered_df <- tibble()
bad_moderate_signal_df <- tibble()

#-------------------------#
#---FUNCTION DEFINITION---#
#-------------------------#
convert_to_csv <- function(df, file_name) {
  write.table(df, file = file.path(file_name), row.names=F, sep = ',')
}

save_plot <- function(plot_name, plot, width=15, height=10) {
  plot_path <- file.path(plots_dir, paste0(plot_name, '.png'))
  ggsave(plot_path, plot, width=width, height=height)

  plot_path <- file.path(plots_dir, paste0(plot_name, '.pdf'))
  ggsave(plot_path, plot, device=cairo_pdf, width=width, height=height)
}

print_msg <- function(msg) {
  print(msg)
  message(msg)
}

is_match <- function(str, pattern) { 
  return(grepl(pattern, str)) 
}

get_session_name <- function(session_abbr) {
  if (session_abbr=='RB') {
    return('RestingBaseline')
  } else if (session_abbr=='ST') {
    return('BaselineWriting')
  } else if (session_abbr=='SC') {
    return('StressCondition')
  } else if (session_abbr=='DT') {
    return('DualTask')
  } else if (session_abbr=='P') {
    return('Presentation')
  }
}

